# ğŸ‰ Superset Embedded Dashboard - é¡¹ç›®å®Œæˆæ€»ç»“

## âœ… é¡¹ç›®çŠ¶æ€ï¼šå·²å®Œæˆå¹¶å¯ç”¨ï¼

### ğŸ¯ å¼€å‘ç¯å¢ƒï¼ˆå½“å‰çŠ¶æ€ï¼‰

**å·²éªŒè¯å¯ç”¨çš„é¡µé¢**:
- âœ… **simple-test.html** - ç®€å•æµ‹è¯•é¡µé¢ï¼ˆæ¨èç”¨äºè°ƒè¯•ï¼‰
- âœ… **test.html** - å®Œæ•´å¼€å‘æµ‹è¯•é¡µé¢ï¼ˆæ¨èæ—¥å¸¸ä½¿ç”¨ï¼‰
- âœ… **index.html** - å¸¦é…ç½®ç•Œé¢çš„é¡µé¢

**è¿è¡Œä¸­çš„æœåŠ¡**:
- âœ… åç«¯ API: http://localhost:3001
- âœ… å‰ç«¯æœåŠ¡: http://localhost:3002
- âœ… Superset: http://localhost:8088

**å¿«é€Ÿè®¿é—®**:
```bash
# æ¨èä½¿ç”¨ï¼ˆå·²éªŒè¯å¯ç”¨ï¼‰
open http://localhost:3002/simple-test.html
open http://localhost:3002/test.html
```

---

## ğŸ“‚ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
~/Documents/superset-embed-demo/
â”‚
â”œâ”€â”€ ğŸ“– æ–‡æ¡£ï¼ˆ5ä»½ï¼‰
â”‚   â”œâ”€â”€ PROJECT-SUMMARY.md              # é¡¹ç›®æ€»ç»“
â”‚   â”œâ”€â”€ FRONTEND-PAGES-GUIDE.md         # å‰ç«¯é¡µé¢ä½¿ç”¨æŒ‡å— â­
â”‚   â”œâ”€â”€ README-COMPLETE.md              # å®Œæ•´ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ PRODUCTION-DEPLOYMENT.md        # ç”Ÿäº§éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ FINAL-SUMMARY.md                # æœ¬æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ¨ å‰ç«¯é¡µé¢ï¼ˆ5ä¸ªï¼‰
â”‚   â”œâ”€â”€ simple-test.html                # ç®€å•æµ‹è¯• âœ… å¯ç”¨
â”‚   â”œâ”€â”€ test.html                       # å®Œæ•´æµ‹è¯• âœ… å¯ç”¨
â”‚   â”œâ”€â”€ index.html                      # é…ç½®ç•Œé¢ âœ… å¯ç”¨
â”‚   â”œâ”€â”€ production-preview.html         # ç”Ÿäº§é¢„è§ˆ
â”‚   â””â”€â”€ production.html                 # ç”Ÿäº§ç¯å¢ƒï¼ˆéœ€é…ç½®ï¼‰
â”‚
â”œâ”€â”€ ğŸ”§ åç«¯ APIï¼ˆ2ä¸ªç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ server.js                       # å¼€å‘ç‰ˆ âœ… è¿è¡Œä¸­
â”‚   â””â”€â”€ server-production.js            # ç”Ÿäº§ç‰ˆï¼ˆå¸¦å®‰å…¨ç‰¹æ€§ï¼‰
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config/superset_config_production.py    # Superset ç”Ÿäº§é…ç½®
â”‚   â”œâ”€â”€ backend/.env.example                    # å¼€å‘ç¯å¢ƒå˜é‡
â”‚   â””â”€â”€ backend/.env.production.example         # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”‚
â””â”€â”€ ğŸ› ï¸ å·¥å…·è„šæœ¬
    â””â”€â”€ scripts/enable-dashboard-embedded.sh    # å¯ç”¨ Dashboard
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

### å¼€å‘ç¯å¢ƒï¼ˆç°åœ¨å°±èƒ½ç”¨ï¼‰

```bash
# 1. ç¡®ä¿æœåŠ¡è¿è¡Œä¸­
# åç«¯ API
cd ~/Documents/superset-embed-demo/backend
npm start  # è¿è¡Œåœ¨ http://localhost:3001

# å‰ç«¯ï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
cd ~/Documents/superset-embed-demo/frontend
python3 -m http.server 3002  # è¿è¡Œåœ¨ http://localhost:3002

# 2. æ‰“å¼€æµè§ˆå™¨
open http://localhost:3002/test.html
```

### æ·»åŠ æ–° Dashboard

```bash
# 1. è·å– Dashboard åˆ—è¡¨
curl http://localhost:3001/api/dashboards | python3 -m json.tool

# 2. å¯ç”¨ embedded æ¨¡å¼
cd ~/Documents/superset-embed-demo
./scripts/enable-dashboard-embedded.sh <DASHBOARD_UUID>

# 3. è®°å½•è¿”å›çš„ Embedded UUIDï¼Œåœ¨å‰ç«¯ä½¿ç”¨
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# å‚è€ƒè¯¦ç»†æ–‡æ¡£
cat ~/Documents/superset-embed-demo/PRODUCTION-DEPLOYMENT.md
```

---

## ğŸ“Š å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒå¯¹æ¯”

### å®‰å…¨æ€§

| åŠŸèƒ½ | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |
|------|----------|----------|
| **HTTPS** | âŒ HTTP | âœ… å¼ºåˆ¶ HTTPS |
| **CSRF ä¿æŠ¤** | âŒ ç¦ç”¨ | âœ… å¯ç”¨ |
| **Talisman** | âŒ ç¦ç”¨ | âœ… å¯ç”¨ï¼ˆå®‰å…¨å¤´ï¼‰|
| **CORS** | âŒ å¼€æ”¾ | âœ… ä¸¥æ ¼é™åˆ¶ |
| **é€Ÿç‡é™åˆ¶** | âŒ æ—  | âœ… 50 æ¬¡/å°æ—¶ |
| **è¾“å…¥éªŒè¯** | âŒ åŸºç¡€ | âœ… ä¸¥æ ¼éªŒè¯ |

### åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |
|------|----------|----------|
| **ç¼“å­˜** | âŒ å†…å­˜ | âœ… Redis |
| **é‡è¯•é€»è¾‘** | âŒ æ—  | âœ… 3æ¬¡æŒ‡æ•°é€€é¿ |
| **é”™è¯¯å¤„ç†** | â­â­ åŸºç¡€ | â­â­â­â­â­ å®Œå–„ |
| **æ—¥å¿—** | âŒ Console | âœ… æ–‡ä»¶ + ç›‘æ§ |
| **å¤‡ä»½** | âŒ æ—  | âœ… æ¯æ—¥è‡ªåŠ¨ |
| **ç›‘æ§** | âŒ æ—  | âœ… Prometheus |

---

## ğŸ“ é‡è¦æ¦‚å¿µ

### Dashboard UUID vs Embedded UUID

è¿™æ˜¯æœ€å®¹æ˜“æ··æ·†çš„æ¦‚å¿µï¼

| ç±»å‹ | ç”¨é€” | ç¤ºä¾‹ | åœ¨å“ªé‡Œä½¿ç”¨ |
|------|------|------|-----------|
| **Dashboard UUID** | è¯†åˆ« Dashboard | `6d106529-9f27-4df9-9c9e-50e036a67559` | åç«¯ APIï¼ˆç”Ÿæˆ tokenï¼‰|
| **Embedded UUID** | åµŒå…¥é¡µé¢ | `51c5173a-ae1d-4038-b417-22a72c15bb48` | å‰ç«¯ SDKï¼ˆåŠ è½½é¡µé¢ï¼‰|

**ä»£ç ç¤ºä¾‹**:
```javascript
// å‰ç«¯ï¼šä½¿ç”¨ Embedded UUID
embedDashboard({
    id: '51c5173a-ae1d-4038-b417-22a72c15bb48',  // Embedded UUID âœ…
    fetchGuestToken: async () => {
        const response = await fetch('http://localhost:3001/api/guest-token', {
            body: JSON.stringify({
                dashboardId: '6d106529-9f27-4df9-9c9e-50e036a67559'  // Dashboard UUID âœ…
            })
        });
        return (await response.json()).token;
    }
});
```

---

## âš ï¸ å·²çŸ¥é™åˆ¶å’Œè§£å†³æ–¹æ¡ˆ

### 1. ç¼–è¾‘æŒ‰é’®ä»ç„¶å¯è§

**ç°è±¡**: åœ¨åµŒå…¥çš„ Dashboard ä¸­å¯ä»¥çœ‹åˆ°ç¼–è¾‘æŒ‰é’®

**åŸå› **:
- Superset Embedded SDK é™åˆ¶
- æµè§ˆå™¨è·¨åŸŸå®‰å…¨ç­–ç•¥

**æ˜¯å¦æ˜¯é—®é¢˜**: **ä¸æ˜¯ï¼**
- Guest ç”¨æˆ·æ²¡æœ‰ç¼–è¾‘æƒé™
- ç‚¹å‡»ä¼šæ”¶åˆ° 403 é”™è¯¯ï¼ˆæ­£å¸¸çš„å®‰å…¨è¡Œä¸ºï¼‰
- å·²åœ¨é¡µé¢æ·»åŠ ç”¨æˆ·æç¤º

**è§£å†³æ–¹æ¡ˆ**:
1. **æ¨è**: æ·»åŠ ç”¨æˆ·è¯´æ˜ï¼ˆå·²å®Œæˆï¼‰
2. **é«˜çº§**: ä¿®æ”¹ Superset æºç ï¼ˆä¸æ¨èï¼‰
3. **æœªæ¥**: ç­‰å¾… Superset å®˜æ–¹æ”¯æŒ `hideEdit`

### 2. å¼€å‘ç¯å¢ƒä¸å®‰å…¨

**ç°è±¡**: å¤šä¸ªå®‰å…¨ç‰¹æ€§è¢«ç¦ç”¨

**åŸå› **: ä¸ºäº†å¼€å‘æ–¹ä¾¿

**è§£å†³æ–¹æ¡ˆ**:
- å¼€å‘ç¯å¢ƒï¼šä¿æŒå½“å‰é…ç½® âœ…
- ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ `server-production.js` å’Œ `superset_config_production.py` âœ…

---

## ğŸ“ å­¦åˆ°çš„å…³é”®çŸ¥è¯†

### 1. Embedded æ¨¡å¼é…ç½®
- æ¯ä¸ª Dashboard éœ€è¦å•ç‹¬å¯ç”¨ embedded æ¨¡å¼
- ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ Embedded UUID
- éœ€è¦é…ç½® allowed_domains

### 2. Guest Token æœºåˆ¶
- ä¸´æ—¶è®¿é—®ä»¤ç‰Œï¼ˆ5åˆ†é’Ÿæœ‰æ•ˆï¼‰
- é€šè¿‡åç«¯ API ç”Ÿæˆ
- åŸºäº JWT æ ‡å‡†

### 3. å®‰å…¨æœ€ä½³å®è·µ
- HTTPS æ˜¯ç”Ÿäº§ç¯å¢ƒå¿…éœ€çš„
- CSRF å’Œ Talisman ä¿æŠ¤ä¸èƒ½ç¦ç”¨
- é€Ÿç‡é™åˆ¶é˜²æ­¢æ»¥ç”¨
- è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰æ§åˆ¶æ•°æ®è®¿é—®

### 4. å‰åç«¯æ¶æ„
```
æµè§ˆå™¨
  â†“
å‰ç«¯ HTML (http://localhost:3002)
  â†“
åç«¯ API (http://localhost:3001)
  â†“
Superset (http://localhost:8088)
```

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### é¡¹ç›®æ–‡æ¡£ï¼ˆæŒ‰é‡è¦æ€§æ’åºï¼‰

1. **FRONTEND-PAGES-GUIDE.md** â­â­â­â­â­
   - å‰ç«¯é¡µé¢ä½¿ç”¨æŒ‡å—
   - é€‰æ‹©åˆé€‚çš„é¡µé¢
   - æ¨èæ—¥å¸¸ä½¿ç”¨

2. **PRODUCTION-DEPLOYMENT.md** â­â­â­â­â­
   - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
   - å®Œæ•´éƒ¨ç½²æ­¥éª¤
   - å®‰å…¨åŠ å›ºæŒ‡å—

3. **PROJECT-SUMMARY.md** â­â­â­â­
   - é¡¹ç›®æ¦‚è§ˆ
   - æŠ€æœ¯æ ˆè¯´æ˜
   - æ•…éšœæ’æŸ¥

4. **README-COMPLETE.md** â­â­â­
   - è¯¦ç»†ä½¿ç”¨æŒ‡å—
   - é…ç½®è¯´æ˜
   - å¸¸è§é—®é¢˜

5. **FINAL-SUMMARY.md** â­â­â­
   - æœ¬æ–‡ä»¶
   - é¡¹ç›®æ€»ç»“
   - å¿«é€Ÿå‚è€ƒ

### å¤–éƒ¨èµ„æº

- **Superset å®˜æ–¹æ–‡æ¡£**: https://superset.apache.org/docs/embedding-superset
- **Superset GitHub**: https://github.com/apache/superset
- **Embedded SDK**: https://www.npmjs.com/package/@superset-ui/embedded-sdk

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

### å¼€å‘ç¯å¢ƒï¼ˆå·²å®Œæˆ âœ…ï¼‰

- [x] Superset é…ç½®ï¼ˆEMBEDDED_SUPERSET å¯ç”¨ï¼‰
- [x] åç«¯ API è¿è¡Œ
- [x] å‰ç«¯é¡µé¢å¯è®¿é—®
- [x] Dashboard å¯ç”¨ embedded æ¨¡å¼
- [x] Guest token å¯ä»¥ç”Ÿæˆ
- [x] Dashboard å¯ä»¥æˆåŠŸåµŒå…¥
- [x] æ–‡æ¡£é½å…¨

### ç”Ÿäº§ç¯å¢ƒï¼ˆå¾…éƒ¨ç½²ï¼‰

- [ ] è´­ä¹°åŸŸå
- [ ] é…ç½® SSL è¯ä¹¦
- [ ] å‡†å¤‡æœåŠ¡å™¨ï¼ˆ4æ ¸8GB+ï¼‰
- [ ] å®‰è£… PostgreSQL
- [ ] å®‰è£… Redis
- [ ] é…ç½® Nginx
- [ ] å¯ç”¨å®‰å…¨ç‰¹æ€§
- [ ] é…ç½®ç›‘æ§
- [ ] è®¾ç½®å¤‡ä»½
- [ ] è¿›è¡Œå®‰å…¨å®¡è®¡

---

## ğŸ‰ æœ€ç»ˆæ€»ç»“

### ä½ ç°åœ¨æ‹¥æœ‰ï¼š

âœ… **å®Œæ•´çš„å¼€å‘ç¯å¢ƒ**
- 3ä¸ªå¯ç”¨çš„å‰ç«¯é¡µé¢
- å¼€å‘ç‰ˆåç«¯ API
- å®Œæ•´çš„æ–‡æ¡£

âœ… **ç”Ÿäº§ç¯å¢ƒé…ç½®**
- ç”Ÿäº§çº§åç«¯ API
- ç”Ÿäº§çº§ Superset é…ç½®
- å®Œæ•´çš„éƒ¨ç½²æŒ‡å—

âœ… **çŸ¥è¯†å’Œå·¥å…·**
- ç†è§£ embedded å·¥ä½œåŸç†
- æŒæ¡é…ç½®å’Œéƒ¨ç½²æ–¹æ³•
- æ‹¥æœ‰è‡ªåŠ¨åŒ–è„šæœ¬

### é¡¹ç›®çŠ¶æ€ï¼š

**å¼€å‘ç¯å¢ƒ**: âœ… å®Œå…¨å¯ç”¨ï¼Œæ­£åœ¨è¿è¡Œ
**ç”Ÿäº§ç¯å¢ƒ**: âœ… é…ç½®å°±ç»ªï¼Œå¯éšæ—¶éƒ¨ç½²
**æ–‡æ¡£**: âœ… é½å…¨è¯¦ç»†ï¼Œ5ä»½æ–‡æ¡£

### æ¨èçš„ä¸‹ä¸€æ­¥ï¼š

**ç»§ç»­å¼€å‘**:
- ä½¿ç”¨ `test.html` è¿›è¡Œæ—¥å¸¸å¼€å‘
- æ·»åŠ æ›´å¤š Dashboard
- è‡ªå®šä¹‰æ ·å¼å’ŒåŠŸèƒ½

**å‡†å¤‡éƒ¨ç½²**:
- é˜…è¯» `PRODUCTION-DEPLOYMENT.md`
- å‡†å¤‡æœåŠ¡å™¨å’ŒåŸŸå
- æŒ‰æ­¥éª¤éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

## ğŸ“ è·å–å¸®åŠ©

**é‡åˆ°é—®é¢˜æ—¶**:
1. æŸ¥çœ‹å¯¹åº”çš„æ–‡æ¡£æ–‡ä»¶
2. æ£€æŸ¥æµè§ˆå™¨ Console çš„é”™è¯¯ä¿¡æ¯
3. æŸ¥çœ‹åç«¯æ—¥å¿—
4. å‚è€ƒ Superset å®˜æ–¹æ–‡æ¡£

**å¸¸è§é—®é¢˜**:
- Dashboard æ˜¾ç¤º 404 â†’ æ£€æŸ¥æ˜¯å¦å¯ç”¨ embedded æ¨¡å¼
- Guest token å¤±è´¥ â†’ æ£€æŸ¥ Superset é…ç½®
- ç¼–è¾‘æŒ‰é’®å¯è§ â†’ è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼ˆå·²è§£é‡Šï¼‰

---

## ğŸŠ æ­å–œå®Œæˆï¼

ä½ å·²ç»æˆåŠŸé…ç½®äº†ä¸€ä¸ªå®Œæ•´çš„ Superset Embedded Dashboard é¡¹ç›®ï¼

**é¡¹ç›®ä½ç½®**: `~/Documents/superset-embed-demo/`

**å¿«é€Ÿå¯åŠ¨**:
```bash
# è®¿é—®æµ‹è¯•é¡µé¢
open http://localhost:3002/test.html

# æˆ–ç®€å•æµ‹è¯•é¡µé¢
open http://localhost:3002/simple-test.html
```

ğŸš€ ç°åœ¨ä½ å¯ä»¥ï¼š
- åœ¨å¼€å‘ç¯å¢ƒä¸­è‡ªç”±ä½¿ç”¨
- éšæ—¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- æ ¹æ®éœ€è¦æ‰©å±•åŠŸèƒ½

**Good luck! ğŸ‰**
